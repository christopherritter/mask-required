(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["close-buy"],{8899:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",{attrs:{id:"close-buy"}},[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"shrink",attrs:{cols:"12",md:"4"}},[a("div",{staticClass:"card mt-3"},[a("form",{staticClass:"card-body",on:{submit:function(t){t.preventDefault()}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter your address",id:"autocomplete"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",class:{loading:t.spinner},attrs:{type:"button"},on:{click:t.locatorButtonPressed}},[a("i",{staticClass:"fas fa-map-marker-alt"})])])]),a("div",{staticClass:"input-group mb-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-control col-md-6 mr-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"restaurant"}},[t._v("Restaurant")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.radius,expression:"radius"}],staticClass:"form-control col-md-6 ml-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.radius=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"5"}},[t._v("5KM")]),a("option",{attrs:{value:"10"}},[t._v("10KM")]),a("option",{attrs:{value:"15"}},[t._v("15KM")]),a("option",{attrs:{value:"20"}},[t._v("20KM")])])]),a("button",{staticClass:"btn btn-primary",on:{click:t.findCloseBuyButtonPressed}},[t._v(" Find Close Buy ")])])]),a("ul",{staticClass:"list-group mt-3 mb-3"},t._l(t.places,(function(e){return a("li",{key:e.id,staticClass:"list-group-item list-group-item-action flex-column align-items-start"},[a("h5",{staticClass:"mb-1"},[t._v(t._s(e.name))]),a("small",{staticClass:"text-muted"},[t._v(t._s(e.vicinity))])])})),0)]),a("v-col",{attrs:{cols:"12",md:"8",id:"map"}})],1)],1)],1)},o=[],n=(a("99af"),a("d81d"),a("b0c0"),a("bc3a")),r=a.n(n),i={data:function(){return{address:"",error:"",spinner:!1,apiKey:"AIzaSyCHzVbXJqB_-tUwT2AeUGZ_-HRkvJOHjqI",lat:0,lng:0,type:"",radius:"",places:[]}},mounted:function(){new google.maps.places.Autocomplete(document.getElementById("autocomplete"))},methods:{locatorButtonPressed:function(){var t=this;this.spinner=!0,navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){t.lat=e.coords.latitude,t.lng=e.coords.longitude,t.getAddressFrom(e.coords.latitude,e.coords.longitude)}),(function(e){t.error="Can't find your address. Please enter it manually.",t.spinner=!1})):(this.error="Your browser does not support Geolocation API",this.spinner=!1)},getAddressFrom:function(t,e){var a=this;r.a.get("https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+e+"&key="+this.apiKey).then((function(t){t.data.error_message?a.error=t.data.error_message:a.address=t.data.results[0].formatted_address,a.spinner=!1})).catch((function(t){a.error=t.message,a.spinner=!1}))},findCloseBuyButtonPressed:function(){var t=this,e="https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=".concat(this.lat,",").concat(this.lng,"&type=").concat(this.type,"&radius=").concat(1e3*this.radius,"&key=").concat(this.apiKey);r.a.get(e).then((function(e){t.places=e.data.results,t.showPlacesOnMap()})).catch((function(e){t.error=e.message}))},showPlacesOnMap:function(){for(var t=this,e=new google.maps.Map(this.$refs["map"],{zoom:15,center:new google.maps.LatLng(this.lat,this.lng),mapTypeId:google.maps.MapTypeId.ROADMAP}),a=new google.maps.InfoWindow,s=function(s){var o=t.places[s].geometry.location.lat,n=t.places[s].geometry.location.lng,r=new google.maps.Marker({position:new google.maps.LatLng(o,n),map:e});google.maps.event.addListener(r,"click",(function(){a.setContent('<div class="ui header">'.concat(t.places[s].name,"</div>")),a.open(e,r)}))},o=0;o<this.places.length;o++)s(o)}}},l=i,c=(a("b935"),a("2877")),u=a("6544"),p=a.n(u),d=a("62ad"),m=a("a523"),g=a("f6c4"),v=a("0fd9"),f=Object(c["a"])(l,s,o,!1,null,"98a6b3b8",null);e["default"]=f.exports;p()(f,{VCol:d["a"],VContainer:m["a"],VMain:g["a"],VRow:v["a"]})},b935:function(t,e,a){"use strict";var s=a("ee3e"),o=a.n(s);o.a},ee3e:function(t,e,a){}}]);
//# sourceMappingURL=close-buy.ab84418f.js.map