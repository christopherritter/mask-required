(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["review"],{8836:function(e,t,i){},bb44:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-main",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-container",[i("v-row",{attrs:{id:"review-header"}},[i("v-col",{staticClass:"px-6"},[i("h3",[e._v(e._s(e.place.name))]),i("p",[e._v(e._s(e.place.formatted_address))])])],1),i("v-stepper",{attrs:{vertical:""},model:{value:e.stepper,callback:function(t){e.stepper=t},expression:"stepper"}},[[i("v-stepper-step",{attrs:{step:"1",editable:""}},[e._v(" Review your customer experience. ")]),i("v-stepper-content",{key:"1-content",attrs:{step:"1"}},[i("v-card",{attrs:{flat:""}},[i("v-select",{attrs:{outlined:"",items:e.value,rules:[e.rules.required,e.rules.rating],label:"How would you rate this place?",required:""},model:{value:e.review.rating,callback:function(t){e.$set(e.review,"rating",t)},expression:"review.rating"}}),i("v-text-field",{attrs:{rules:[e.rules.required,e.rules.counter],outlined:"",counter:"",maxlength:"80",name:"review-title",label:"How would you summarize your visit?",required:""},model:{value:e.review.title,callback:function(t){e.$set(e.review,"title",t)},expression:"review.title"}}),i("v-textarea",{attrs:{outlined:"",name:"review-text",label:"Tell us more about your experience."},model:{value:e.review.content,callback:function(t){e.$set(e.review,"content",t)},expression:"review.content"}})],1)],1)],[i("v-stepper-step",{attrs:{step:"2",editable:""}},[e._v(" Who was wearing masks? ")]),i("v-stepper-content",{key:"2-content",attrs:{step:"2"}},[i("v-card",{attrs:{flat:""}},[i("v-select",{attrs:{items:e.masks.employees,label:"Were employees wearing masks?",outlined:""},model:{value:e.review.masks.employees,callback:function(t){e.$set(e.review.masks,"employees",t)},expression:"review.masks.employees"}}),i("v-select",{attrs:{items:e.masks.customers,label:"Were customers wearing masks?",outlined:""},model:{value:e.review.masks.customers,callback:function(t){e.$set(e.review.masks,"customers",t)},expression:"review.masks.customers"}})],1)],1)],[i("v-stepper-step",{attrs:{step:"3",editable:""}},[e._v(" Could you say a little more about it? ")]),i("v-stepper-content",{key:"3-content",attrs:{step:"3"}},[i("v-card",{attrs:{flat:""}},e._l(e.questions,(function(t){return i("v-row",{key:"question-"+t.id},[i("v-col",{attrs:{sm:"12",md:"6"}},[e._v(" "+e._s(t.text)+" ")]),i("v-col",{staticClass:"d-flex justify-end",attrs:{sm:"12",md:"6"}},[i("v-radio-group",{attrs:{row:""},model:{value:e.review.questions[t.id].value,callback:function(i){e.$set(e.review.questions[t.id],"value",i)},expression:"review.questions[question.id].value"}},e._l(t.answers,(function(e){return i("v-radio",{key:"answer-"+e.id,attrs:{label:e.label,value:e.value}})})),1)],1)],1)})),1)],1)],[i("v-stepper-step",{attrs:{step:"4",editable:""}},[e._v(" Click to leave a rating ")]),i("v-stepper-content",{key:"4-content",attrs:{step:"4"}},[i("v-card",{attrs:{flat:""}},e._l(e.ratings,(function(t){return i("v-row",{key:"rating-"+t.id,staticStyle:{"flex-wrap":"nowrap"}},[i("v-col",{staticClass:"d-flex align-stretch flex-grow-0 flex-shrink-1",attrs:{sm:"12",md:"6"}},[e._v(" "+e._s(t.label)+" ")]),i("v-col",{staticClass:"flex-grow-1 flex-shrink-0",attrs:{sm:"12",md:"6"}},[i("v-rating",{attrs:{rules:[e.rules.required],dark:"",size:"30"},model:{value:e.review.ratings[t.id].value,callback:function(i){e.$set(e.review.ratings[t.id],"value",i)},expression:"review.ratings[rating.id].value"}})],1),i("v-col",{staticClass:"flex-grow-0 flex-shrink-1"},[i("v-list-item-icon",{staticClass:"mr-2"},[i("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[i("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",r,!1),s),[e._v("mdi-information")])]}}],null,!0)},[i("span",[e._v(e._s(t.description))])])],1)],1)],1)})),1)],1)],[i("v-stepper-step",{attrs:{step:"5",editable:""}},[e._v(" Certify your review ")]),i("v-stepper-content",{key:"5-content",attrs:{step:"5"}},[i("v-card",{attrs:{flat:""}},[i("p",{staticClass:"text-subtitle-2"},[e._v(" This review is based on my own experience and is my genuine opinion of this restaurant. I have no personal or business relationship with this establishment, and have not been offered any incentive or payment originating from the establishment to write this review. ")]),i("v-checkbox",{attrs:{label:"I certify the above statement is true."},model:{value:e.review.agreement,callback:function(t){e.$set(e.review,"agreement",t)},expression:"review.agreement"}})],1)],1)]],2),i("v-row",[i("v-col",{staticClass:"d-md-flex flex-row"},[i("v-btn",{staticClass:"mt-4",attrs:{color:"green darken-2",dark:"",block:e.isMobile},on:{click:e.nextStep}},[e._v(" Next step ")]),i("v-spacer",{staticClass:"hidden-sm-and-down"}),i("v-btn",{staticClass:"mt-4 ml-md-2",attrs:{disabled:!e.review.agreement,color:"primary",block:e.isMobile},on:{click:function(t){return e.createReview(e.place)}}},[e._v(" Submit review ")]),i("v-btn",{staticClass:"mt-4 ml-2",attrs:{block:e.isMobile,text:""},on:{click:function(t){return e.cancelReview(e.place)}}},[e._v(" Cancel review ")])],1)],1)],1)],1)],1)},r=[],n=i("5530"),a=(i("96cf"),i("1da1")),o=i("2f62"),l=i("c1df"),c=i.n(l),u={name:"review",data:function(){return{currentPlace:{},stepper:1,steps:5,review:{rating:null,title:"",content:"",masks:{employees:"",customers:""},questions:[{id:0,value:""},{id:1,value:""},{id:2,value:""},{id:3,value:""},{id:4,value:""},{id:5,value:""},{id:6,value:""},{id:7,value:""},{id:8,value:""},{id:9,value:""},{id:10,value:""},{id:11,value:""}],ratings:[{id:0,value:0},{id:1,value:0},{id:2,value:0}],agreement:!1},agreement:!1,value:[{text:"5 - Perfect example of a safe business.",value:5},{text:"4 - Not perfect but a good place to shop.",value:4},{text:"3 - Could definitely use some improvement.",value:3},{text:"2 - Not exactly my favorite place to shop.",value:2},{text:"1 - I would rather do business elsewhere.",value:1}],valid:!0}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("showSearchBar",!0),t.next=3,e.$store.dispatch("fetchPlace",{place_id:e.place.place_id});case 3:return t.next=5,e.$store.dispatch("fetchReviews",e.place.place_id);case 5:i=e.$store.getters.getPlace,e.currentPlace=i;case 7:case"end":return t.stop()}}),t)})))()},watch:{steps:function(e){this.stepper>e&&(this.stepper=e)}},computed:Object(n["a"])(Object(n["a"])({},Object(o["b"])(["userProfile","place",["reviews"],"masks",["questions"],["ratings"],"rules"])),{},{isMobile:function(){return this.$vuetify.breakpoint.smAndDown}}),methods:{onInput:function(e){this.steps=parseInt(e)},nextStep:function(){this.stepper===this.steps?this.stepper=1:this.stepper++},fetchPlace:function(e){this.$store.dispatch("fetchPlace",e)},createReview:function(e){this.$refs.form.validate()?(this.$store.dispatch("createReview",{rating:this.review.rating,title:this.review.title,content:this.review.content,masks:{employees:this.review.masks.employees,customers:this.review.masks.customers},questions:this.review.questions,ratings:this.review.ratings,agreement:this.review.agreement}),this.$refs.form.reset(),this.$router.push({name:"place",params:{id:e.place_id}})):this.$vuetify.goTo("form")},likeReview:function(e,t){this.$store.dispatch("likeReview",{id:e,likesCount:t})},cancelReview:function(e){this.$refs.form.reset(),this.$router.push({name:"place",params:{id:e.place_id}})}},filters:{formatDate:function(e){if(!e)return"-";var t=e.toDate();return c()(t).fromNow()},trimLength:function(e){return e.length<200?e:"".concat(e.substring(0,200),"...")}}},p=u,v=i("2877"),h=i("6544"),d=i.n(h),f=i("8336"),m=i("b0af"),w=i("ac7c"),g=i("62ad"),b=i("a523"),_=(i("4de4"),i("7db0"),i("4160"),i("caad"),i("07ac"),i("2532"),i("159b"),i("58df")),k=i("7e2b"),y=i("3206"),x=Object(_["a"])(k["a"],Object(y["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,i=function(e){return e.$watch("hasError",(function(i){t.$set(t.errorBag,e._uid,i)}),{immediate:!0})},s={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?s.shouldValidate=e.$watch("shouldValidate",(function(r){r&&(t.errorBag.hasOwnProperty(e._uid)||(s.valid=i(e)))})):s.valid=i(e),s},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var i=this.watchers.find((function(e){return e._uid===t._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(n["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}}),$=i("132d"),V=i("34c3"),C=i("f6c4"),S=i("67b6"),B=i("43a6"),I=i("1d4d"),R=i("0fd9"),j=i("b974"),O=i("2fa4"),q=(i("b0c0"),i("a9e3"),i("8836"),i("a452")),E=i("7560"),A=i("d9bd"),T=Object(_["a"])(Object(y["b"])("stepper"),q["a"],E["a"]),P=T.extend({name:"v-stepper",provide:function(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{altLabels:Boolean,nonLinear:Boolean,vertical:Boolean},data:function(){var e={isBooted:!1,steps:[],content:[],isReverse:!1};return e.internalLazyValue=null!=this.value?this.value:(e[0]||{}).step||1,e},computed:{classes:function(){return Object(n["a"])({"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear},this.themeClasses)}},watch:{internalValue:function(e,t){this.isReverse=Number(e)<Number(t),t&&(this.isBooted=!0),this.updateView()}},created:function(){this.$listeners.input&&Object(A["a"])("@input","@change",this)},mounted:function(){this.updateView()},methods:{register:function(e){"v-stepper-step"===e.$options.name?this.steps.push(e):"v-stepper-content"===e.$options.name&&(e.isVertical=this.vertical,this.content.push(e))},unregister:function(e){"v-stepper-step"===e.$options.name?this.steps=this.steps.filter((function(t){return t!==e})):"v-stepper-content"===e.$options.name&&(e.isVertical=this.vertical,this.content=this.content.filter((function(t){return t!==e})))},stepClick:function(e){var t=this;this.$nextTick((function(){return t.internalValue=e}))},updateView:function(){for(var e=this.steps.length;--e>=0;)this.steps[e].toggle(this.internalValue);for(var t=this.content.length;--t>=0;)this.content[t].toggle(this.internalValue,this.isReverse)}},render:function(e){return e("div",{staticClass:"v-stepper",class:this.classes},this.$slots.default)}}),L=(i("d3b7"),i("25f0"),i("0789")),N=i("80d2"),z=Object(_["a"])(Object(y["a"])("stepper","v-stepper-content","v-stepper")),D=z.extend().extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data:function(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{computedTransition:function(){var e=this.$vuetify.rtl?!this.isReverse:this.isReverse;return e?L["e"]:L["f"]},styles:function(){return this.isVertical?{height:Object(N["f"])(this.height)}:{}}},watch:{isActive:function(e,t){e&&null==t?this.height="auto":this.isVertical&&(this.isActive?this.enter():this.leave())}},mounted:function(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition:function(e){this.isActive&&"height"===e.propertyName&&(this.height="auto")},enter:function(){var e=this,t=0;requestAnimationFrame((function(){t=e.$refs.wrapper.scrollHeight})),this.height=0,setTimeout((function(){return e.isActive&&(e.height=t||"auto")}),450)},leave:function(){var e=this;this.height=this.$refs.wrapper.clientHeight,setTimeout((function(){return e.height=0}),10)},toggle:function(e,t){this.isActive=e.toString()===this.step.toString(),this.isReverse=t}},render:function(e){var t={staticClass:"v-stepper__content"},i={staticClass:"v-stepper__wrapper",style:this.styles,ref:"wrapper"};this.isVertical||(t.directives=[{name:"show",value:this.isActive}]);var s=e("div",i,[this.$slots.default]),r=e("div",t,[s]);return e(this.computedTransition,{on:this.$listeners},[r])}}),M=(i("45fc"),i("9d26")),H=i("a9ad"),F=i("5607"),W=Object(_["a"])(H["a"],Object(y["a"])("stepper","v-stepper-step","v-stepper")),J=W.extend().extend({name:"v-stepper-step",directives:{ripple:F["a"]},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},errorIcon:{type:String,default:"$error"},rules:{type:Array,default:function(){return[]}},step:[Number,String]},data:function(){return{isActive:!1,isInactive:!0}},computed:{classes:function(){return{"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error error--text":this.hasError,"v-stepper__step--complete":this.complete}},hasError:function(){return this.rules.some((function(e){return!0!==e()}))}},mounted:function(){this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.stepper&&this.stepper.unregister(this)},methods:{click:function(e){e.stopPropagation(),this.$emit("click",e),this.editable&&this.stepClick(this.step)},genIcon:function(e){return this.$createElement(M["a"],e)},genLabel:function(){return this.$createElement("div",{staticClass:"v-stepper__label"},this.$slots.default)},genStep:function(){var e=!(this.hasError||!this.complete&&!this.isActive)&&this.color;return this.$createElement("span",this.setBackgroundColor(e,{staticClass:"v-stepper__step__step"}),this.genStepContent())},genStepContent:function(){var e=[];return this.hasError?e.push(this.genIcon(this.errorIcon)):this.complete?this.editable?e.push(this.genIcon(this.editIcon)):e.push(this.genIcon(this.completeIcon)):e.push(String(this.step)),e},toggle:function(e){this.isActive=e.toString()===this.step.toString(),this.isInactive=Number(e)<Number(this.step)}},render:function(e){return e("div",{staticClass:"v-stepper__step",class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click}},[this.genStep(),this.genLabel()])}}),G=i("8654"),K=i("a844"),Q=i("3a2f"),U=Object(v["a"])(p,s,r,!1,null,null,null);t["default"]=U.exports;d()(U,{VBtn:f["a"],VCard:m["a"],VCheckbox:w["a"],VCol:g["a"],VContainer:b["a"],VForm:x,VIcon:$["a"],VListItemIcon:V["a"],VMain:C["a"],VRadio:S["a"],VRadioGroup:B["a"],VRating:I["a"],VRow:R["a"],VSelect:j["a"],VSpacer:O["a"],VStepper:P,VStepperContent:D,VStepperStep:J,VTextField:G["a"],VTextarea:K["a"],VTooltip:Q["a"]})}}]);
//# sourceMappingURL=review.e353ff89.js.map